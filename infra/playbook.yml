---
- name: Provision monitoring
  hosts: monitoring
  become: yes
  gather_facts: yes
  
  roles:
    - monitoring
  tags: monitoring

- name: Provision node exporters
  hosts: all
  become: yes
  gather_facts: yes
  
  roles:
    - node_exporter
  tags: node_exporter

- name: Provision Load Balancer
  hosts: load_balancer
  become: yes
  gather_facts: yes
  
  roles:
    - load_balancer
  tags: load_balancer

- name: Provision postgresql
  hosts: postgres
  become: yes
  gather_facts: yes
  
  roles:
    - postgresql
  tags: postgresql

- name: Provision valkey
  hosts: valkey
  become: yes
  gather_facts: yes
  
  roles:
    - valkey
  tags: valkey

- name: Provision Elasticsearch
  hosts: elasticsearch
  become: yes
  gather_facts: yes
  roles:
    - elasticsearch
  tags: elasticsearch

- name: Deploy API Server
  hosts: api_servers
  become: yes
  gather_facts: yes
  
  roles:
    - api_server
  tags: api_server