---
# API Server configuration
api_server_version: "latest"
api_server_port: "8081"
api_server_user: "bulbul"
api_server_group: "bulbul"
api_server_home: "/opt/bulbul"
api_server_binary_path: "{{ api_server_home }}/api-server"
sync_seats_binary_path: "{{ api_server_home }}/sync-seats"
api_server_config_dir: "/etc/bulbul"

# Go configuration
go_version: "1.21"
go_install_dir: "/usr/local"

# Service configuration
api_server_service_name: "bulbul-api"
api_server_restart_policy: "always"
api_server_restart_sec: "5"

# Application configuration
gin_mode: "release"
log_level: "info"
log_format: "json"
request_timeout_sec: 300

# Database configuration (PostgreSQL)
postgres_host: "{{ hostvars[groups['postgres'][0]]['ansible_host'] }}"
postgres_port: "5432"
postgres_user: "postgres"
postgres_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30363361626530653630633433373231363864386439323730383136333538626131383632326434
          6166643262313964653165356536336139623066636239300a343434373632313038336535373336
          39663231396437373762663731316133363235383736343661333937363132396466383532636432
          3365393864303164620a306161633939366133633334643665643335316561303466623438386636
          36336432373236666336376339323134636564643032313232633433656533626134
postgres_database: "bulbul"
postgres_sslmode: "disable"
db_max_open_conns: 100

# Cache configuration (Valkey)
valkey_host: "{{ hostvars[groups['valkey'][0]]['ansible_host'] }}"
valkey_port: "6379"
valkey_password: ""
valkey_client_cache_size_mb: 128
valkey_auth_cache_ttl_min: 10
valkey_events_cache_ttl_min: 5

# NATS configuration
nats_url: "nats://{{ hostvars[groups['nats'][0]]['ansible_host'] }}:4222"
nats_cluster_id: "bulbul-cluster"
nats_client_id: "bulbul-api"

# External services
ticketing_service_url: "https://hub.hackload.kz/event/Bulbul/event-provider"
payment_gateway_url: "https://hub.hackload.kz/payment-provider/common"
payment_team_slug: "bulbul"
payment_password: "hackload2025"
service_timeout_sec: "30"

# Logging
log_file: "/var/log/{{ api_server_service_name }}.log"

# Elastic
elasticsearch_host: "{{ hostvars[groups['elasticsearch'][0]]['ansible_host'] }}"